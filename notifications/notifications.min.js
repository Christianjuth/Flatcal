function checkForNotifications(){$.getJSON(chrome.extension.getURL("/notifications/notifications.json"),function(e){for(e.sort(compare),i=0;i<e.length;i++){var t=e[i],o=$.parseJSON(localStorage.notify),a=parseInt(moment(o.date,"YYYYMMDD").add("days",o.delay).format("YYYYMMDD"))<=parseInt(moment().format("YYYYMMDD")),n=t.id==parseInt($.parseJSON(localStorage.notify).id)+1;if(t.id>$.parseJSON(localStorage.notify).id){if("true"==localStorage.noNotifyDelay&&"false"==localStorage.limitNotifications&&n){createNotification(t.title,t.message),o.id=t.id,o.date=moment().format("YYYYMMDD"),o.delay=Math.floor(4*Math.random()+3),localStorage.notify=JSON.stringify(o);break}if(a&&"false"==localStorage.limitNotifications){createNotification(t.title,t.message),o.id=t.id,o.date=moment().format("YYYYMMDD"),o.delay=Math.floor(4*Math.random()+3),localStorage.notify=JSON.stringify(o);break}if("true"==localStorage.limitNotifications&&1==t.important&&a){createNotification(t.title,t.message),o.id=t.id,o.date=moment().format("YYYYMMDD"),o.delay=Math.floor(4*Math.random()+3),localStorage.notify=JSON.stringify(o);break}}}setTimeout(function(){checkForNotifications()},3e5)})}function createNotification(e,t){var i={type:"basic",title:e,message:t,iconUrl:"../resources/icons/icon.png"};chrome.notifications.create("",i,function(){})}function compare(e,t){return e.id<t.id?-1:e.id>t.id?1:0}$(document).ready(function(){checkForNotifications()});