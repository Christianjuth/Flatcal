var calculator={ini:function(t){this.storage=window[t.storage],(void 0==t.max||t.max>15)&&(t.max=15),void 0!==typeof t.selector?($.each(t.selector,function(t,a){calculator.selector[t]=$(a)}),$.each(t.options,function(t,a){calculator.options[t]=a}),this.options.maxLength=Math.min(Math.round($("#input-container").width()/18-1),t.max),this.lastSecond="0",this.first="0",this.second="",this.op="","rad"==calculator.storage.radDeg?this.rad():this.deg(),this.screen.clear(),"0"!=calculator.storage.m&&$("#m-status").text("m")):console.error("bad or missing screen selector")},selector:{},options:{},numberClicked:function(t){1==calculator.clear&&calculator.screen.clear();var a="0"==calculator.screen.get()&&0==t&&-1==calculator.selector.screen.text().indexOf(".");return""==calculator.op&&1!=a?calculator.first.replace(/-/g,"").replace(/\./g,"").length<calculator.options.maxLength&&(this.first=String(-1!=this.first.indexOf(".")?parseInt(this.first.split(".")[0])+"."+this.first.split(".")[1]+t:parseInt(this.first+""+t)),this.screen.set(this.first,!1)):1!=a&&calculator.second.replace(/-/g,"").replace(/\./g,"").length<calculator.options.maxLength&&(this.second=String(0==this.second.length?t:-1!=this.second.indexOf(".")?parseInt(this.second.split(".")[0])+"."+this.second.split(".")[1]+t:parseInt(this.second+""+t)),this.screen.set(this.second,!1)),t},screen:{set:function(t){t=String(t),""==t&&(t="0"),-1!=t.indexOf(".")&&"-0"!=t?t=String(parseInt(t.split(".")[0])+"."+t.split(".")[1]):"-0"!=t&&(t=String(parseInt(t)));var e=""!=t&&void 0!=t&&"undefined"!=t;return"NaN"==t||t.split(".")[0].replace(/-/,"").length>calculator.options.maxLength||!e?(calculator.screen.clear(),calculator.selector.screen.text("ERROR"),console.error("ERROR"),!1):(t.replace(/-/,"").length<=calculator.options.maxLength&&e?calculator.selector.screen.text(calculator.parse.commas(t)):t.split(".")[0].replace(/-/,"").length<calculator.options.maxLength&&e&&calculator.selector.screen.text(calculator.parse.commas(math.round(parseFloat(t),calculator.options.maxLength-t.split(".")[0].length))),calculator.selector.screen.text().replace(/,/g,""))},get:function(){return calculator.selector.screen.text().replace(/,/g,"")},length:function(){return this.get().replace(/\./g,"").replace(/-/g,"").length},clear:function(){""!=calculator.second&&(calculator.lastSecond=calculator.second),calculator.clear=!1,calculator.first="0",calculator.second="",calculator.selector.screen.text(""),calculator.animate.op(),calculator.op="",overall="",calculator.screen.set(0)}},operator:function(t){return void 0==t&&(t=""),""!=calculator.op?(calculator.calculate(!1,!1),calculator.clear=!1,calculator.op=t,calculator.animate.op(t)):(calculator.clear=!1,calculator.op=t,calculator.animate.op(t)),calculator.op},calculate:function(t,a){new Array;"0"!=this.second&&""!=this.second&&(this.lastSecond=this.second),""!=calculator.second?("plus"==calculator.op?overall=parseFloat(calculator.first)+parseFloat(calculator.second):"subtract"==calculator.op?overall=parseFloat(calculator.first)-parseFloat(calculator.second):"multiply"==calculator.op?overall=parseFloat(calculator.first)*parseFloat(calculator.second):"divide"==calculator.op?overall=parseFloat(calculator.first)/parseFloat(calculator.second):"mod"==calculator.op?overall=parseFloat(calculator.first)%parseFloat(calculator.second):"pow-of-y"==calculator.op?overall=Math.pow(parseFloat(calculator.first),parseFloat(calculator.second)):"square-root-y"==calculator.op&&(overall=this.math.nthroot(parseFloat(calculator.first),parseFloat(calculator.second))),calculator.selector.screen.text(""),setTimeout(calculator.screen.set,100,overall),this.animate.op(),calculator.first=String(overall),calculator.second="",overall="",1==t&&(this.clear=!0)):""!=calculator.lastSecond&&""!=calculator.op&&0!=a&&("plus"==calculator.op?overall=parseFloat(calculator.first)+parseFloat(calculator.lastSecond):"subtract"==calculator.op?overall=parseFloat(calculator.first)-parseFloat(calculator.lastSecond):"multiply"==calculator.op?overall=parseFloat(calculator.first)*parseFloat(calculator.lastSecond):"divide"==calculator.op?overall=parseFloat(calculator.first)/parseFloat(calculator.lastSecond):"mod"==calculator.op?overall=parseFloat(calculator.first)%parseFloat(calculator.lastSecond):"pow-of-y"==calculator.op?overall=Math.pow(parseFloat(calculator.first),parseFloat(calculator.lastSecond)):"square-root-y"==calculator.op&&(overall=this.math.nthroot(parseFloat(calculator.first),parseFloat(calculator.lastSecond))),calculator.selector.screen.text(""),setTimeout(calculator.screen.set,100,overall),this.animate.op(),calculator.first=String(overall),calculator.second="",overall="",1==t&&(this.clear=!0))},mathFunctions:{pi:function(){return String(Math.PI)},e:function(){return Math.E},pow:function(t,a){return pow(t,a)},nthroot:function(t,a){try{var e=a%2==1&&0>t;e&&(t=-t);var r=Math.pow(t,1/a);if(a=Math.pow(r,a),Math.abs(t-a)<1&&t>0==a>0)return e?-r:r}catch(l){}},"in":function(t){return Math.log(t)},log:function(t,a){return math.log(parseFloat(t),a)},sin:function(t){return math.sin(math.unit(t,calculator.storage.radDeg))},cos:function(t){return math.cos(math.unit(t,calculator.storage.radDeg))},tan:function(t){return math.tan(math.unit(t,calculator.storage.radDeg))},sinh:function(t){return math.sinh(math.unit(t,calculator.storage.radDeg))},cosh:function(t){return math.cosh(math.unit(t,calculator.storage.radDeg))},tanh:function(t){return math.tanh(math.unit(t,calculator.storage.radDeg))},asin:function(t){return"rad"==calculator.storage.radDeg?math.asin(t):math.asin(t)*(180/Math.PI)},acos:function(t){return"rad"==calculator.storage.radDeg?math.acos(t):math.acos(t)*(180/Math.PI)},atan:function(t){return"rad"==calculator.storage.radDeg?math.atan(t):math.atan(t)*(180/Math.PI)},asinh:function(t){return Math.asinh(t)},acosh:function(t){return Math.acosh(t)},atanh:function(t){return Math.atanh(t)}},math:function(t,a,e){var r=calculator.mathFunctions[t](parseFloat(a),parseFloat(e));return r!==!1?""==calculator.op?calculator.first=calculator.screen.set(r):calculator.second=calculator.screen.set(r):void calculator.screen.get()},event:{addDecimal:function(){1==calculator.clear&&calculator.screen.clear(),-1==calculator.screen.get().indexOf(".")&&(""==calculator.op?(calculator.first=calculator.first+".",calculator.screen.set(calculator.first)):(("."==calculator.second||""==calculator.second)&&(calculator.second="0."),calculator.second=calculator.second+".",calculator.screen.set(calculator.second)))},posNeg:function(){""==calculator.op&&(calculator.first=0==calculator.first.length?"-0":-1==calculator.first.indexOf("-")?"-"+calculator.first:calculator.first.replace(/-/g,""),calculator.screen.set(calculator.first)),""!=calculator.op&&(calculator.second=0==calculator.second.length?"-0":-1==calculator.second.indexOf("-")?"-"+calculator.second:calculator.second.replace(/-/g,""),calculator.screen.set(calculator.second))},radDeg:function(){"rad"==calculator.selector.radDeg.text()?calculator.storage.radDeg=calculator.deg():"deg"==calculator.selector.radDeg.text()&&(calculator.storage.radDeg=calculator.rad())},percentage:function(){return""==calculator.op?(calculator.first=String(.01*calculator.first),calculator.clear=!0,calculator.screen.set(calculator.first)):(calculator.second=String(.01*calculator.first*calculator.second),calculator.clear=!0,calculator.screen.set(calculator.second))}},m:{recall:function(){return 0!=parseFloat(calculator.storage.m)&&(""==calculator.op?(calculator.first=calculator.storage.m,calculator.screen.set(calculator.first)):(calculator.second=calculator.storage.m,calculator.screen.set(calculator.second))),calculator.storage.m},clear:function(){return calculator.storage.m=0,$("#m-status").text(""),calculator.storage.m},minus:function(){return calculator.storage.m=parseFloat(calculator.storage.m)-parseFloat(calculator.screen.get()),"0"!=calculator.storage.m&&$("#m-status").text("m"),calculator.storage.m},plus:function(){return calculator.storage.m=parseFloat(calculator.storage.m)+parseFloat(calculator.screen.get()),"0"!=calculator.storage.m&&$("#m-status").text("m"),calculator.storage.m}},parse:{commas:function(t){var a=t.toString().split(".");return a[0]=a[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),a.join(".")}},animate:{op:function(t){$(".opp").css({"-webkit-transform":"scale(1)"}),void 0!=calculator.op?($("#"+t).css({"-webkit-transform":"scale(0.90)"}),setTimeout(function(){$("#"+t).css({"-webkit-transform":"scale(0.95)"})},100)):$("#"+t).css({"-webkit-transform":"scale(1)"})}},clipboard:{copy:function(t){var a=$("<input/>");return a.val(t),$("body").append(a),a.select(),document.execCommand("copy"),a.remove(),t},paste:function(){var t=$("<input/>");$("body").append(t),t.select(),document.execCommand("paste");var a=parseFloat(t.val());return isNaN(parseFloat(a))||"0"==String(a)?(calculator.selector.screen.text("ERROR"),calculator.screen.clear()):(calculator.screen.set(a),""==calculator.op?calculator.first=a:calculator.second=a),t.remove(),a}},rad:function(){return this.selector.radDeg.text("rad"),"undefined"!=typeof this.selector.radDegInvert&&this.selector.radDegInvert.text("deg"),"rad"},deg:function(){return this.selector.radDeg.text("deg"),"undefined"!=typeof this.selector.radDegInvert&&this.selector.radDegInvert.text("rad"),"deg"}};$(document).ready(function(){calculator.ini({storage:"localStorage",selector:{screen:"#input",radDeg:"#rad-deg",radDegInvert:"#rad-deg-invert"},options:{log:!0},max:15})});
