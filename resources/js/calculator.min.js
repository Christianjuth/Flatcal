var calculator={ini:function(o){(void 0==o.max||o.max>15)&&(o.max=15),void 0!=o.selector?(this.screen.selector=o.selector,this.maxLength=Math.min(Math.round($("#input-container").width()/18-1),o.max),this.lastSecond="0",this.first="0",this.second="",this.op="","rad"==localStorage.radDeg?this.rad():this.deg(),this.screen.clear()):console.error("bad or missing screen selector")},numberClicked:function(o){1==calculator.clear&&calculator.screen.clear();var t="0"==calculator.screen.get()&&0==o&&-1==calculator.screen.selector.text().indexOf(".");return""==calculator.op&&1!=t?calculator.first.replace(/-/g,"").replace(/\./g,"").length<calculator.maxLength&&(this.first=String(-1!=this.first.indexOf(".")?parseInt(this.first.split(".")[0])+"."+this.first.split(".")[1]+o:parseInt(this.first+""+o)),this.screen.set(this.first,!1)):1!=t&&calculator.second.replace(/-/g,"").replace(/\./g,"").length<calculator.maxLength&&(this.second=String(0==this.second.length?o:-1!=this.second.indexOf(".")?parseInt(this.second.split(".")[0])+"."+this.second.split(".")[1]+o:parseInt(this.second+""+o)),this.screen.set(this.second,!1)),o},screen:{set:function(o){o=String(o),""==o&&(o="0"),-1!=o.indexOf(".")&&"-0"!=o?o=String(parseInt(o.split(".")[0])+"."+o.split(".")[1]):"-0"!=o&&(o=String(parseInt(o)));var e=""!=o&&void 0!=o&&"undefined"!=o;return"NaN"==o||o.split(".")[0].replace(/-/,"").length>calculator.maxLength||!e?(calculator.screen.clear(),calculator.screen.selector.text("ERROR"),console.error("ERROR"),!1):(o.replace(/-/,"").length<=calculator.maxLength&&e?calculator.screen.selector.text(calculator.parse.commas(o)):o.split(".")[0].replace(/-/,"").length<calculator.maxLength&&e&&calculator.screen.selector.text(calculator.parse.commas(math.round(parseFloat(o),calculator.maxLength-o.split(".")[0].length))),calculator.screen.selector.text().replace(/,/g,""))},get:function(){return calculator.screen.selector.text().replace(/,/g,"")},length:function(){return this.get().replace(/\./g,"").replace(/-/g,"").length},clear:function(){""!=calculator.second&&(calculator.lastSecond=calculator.second),calculator.clear=!1,calculator.first="0",calculator.second="",this.selector.text(""),calculator.animate.op(),calculator.op="",overall="",calculator.screen.set(0)}},operator:function(o){return void 0==o&&(o=""),""!=calculator.op?(calculator.calculate(!1,!1),calculator.clear=!1,calculator.op=o,calculator.animate.op(o)):(calculator.clear=!1,calculator.op=o,calculator.animate.op(o)),calculator.op},calculate:function(o,t){new Array;"0"!=this.second&&""!=this.second&&(this.lastSecond=this.second),""!=calculator.second?("plus"==calculator.op?overall=parseFloat(calculator.first)+parseFloat(calculator.second):"subtract"==calculator.op?overall=parseFloat(calculator.first)-parseFloat(calculator.second):"multiply"==calculator.op?overall=parseFloat(calculator.first)*parseFloat(calculator.second):"divide"==calculator.op?overall=parseFloat(calculator.first)/parseFloat(calculator.second):"mod"==calculator.op?overall=parseFloat(calculator.first)%parseFloat(calculator.second):"pow-of-y"==calculator.op?overall=Math.pow(parseFloat(calculator.first),parseFloat(calculator.second)):"square-root-y"==calculator.op&&(overall=this.math.nthroot(parseFloat(calculator.first),parseFloat(calculator.second))),calculator.screen.selector.text(""),setTimeout(calculator.screen.set,100,overall),setTimeout(calculator.animate.op,150),calculator.first=String(overall),calculator.second="",overall="",1==o&&(calculator.clear=!0)):""!=calculator.lastSecond&&""!=calculator.op&&0!=t&&("plus"==calculator.op?overall=parseFloat(calculator.first)+parseFloat(calculator.lastSecond):"subtract"==calculator.op?overall=parseFloat(calculator.first)-parseFloat(calculator.lastSecond):"multiply"==calculator.op?overall=parseFloat(calculator.first)*parseFloat(calculator.lastSecond):"divide"==calculator.op?overall=parseFloat(calculator.first)/parseFloat(calculator.lastSecond):"mod"==calculator.op?overall=parseFloat(calculator.first)%parseFloat(calculator.lastSecond):"pow-of-y"==calculator.op?overall=Math.pow(parseFloat(calculator.first),parseFloat(calculator.lastSecond)):"square-root-y"==calculator.op&&(overall=this.math.nthroot(parseFloat(calculator.first),parseFloat(calculator.lastSecond))),calculator.screen.selector.text(""),setTimeout(calculator.screen.set,100,overall),setTimeout(calculator.animate.op,150),calculator.first=String(overall),calculator.second="",overall="",1==o&&(calculator.clear=!0))},mathFunctions:{pi:function(){return""==calculator.op?(calculator.first=String(Math.PI),calculator.first):(calculator.second=String(Math.PI),Math.PI)},e:function(){return Math.E},pow:function(o,t){return calculator.first=String(Math.pow(o,t)),calculator.first},nthroot:function(o,t){try{var e=t%2==1&&0>o;e&&(o=-o);var r=Math.pow(o,1/t);if(t=Math.pow(r,t),Math.abs(o-t)<1&&o>0==t>0)return e?-r:r}catch(n){}},sin:function(o){return math.sin(parseFloat(o))},log:function(o){return math.log10(parseFloat(o))},cos:function(o){return"rad"==localStorage.radDeg?Math.cos(o):Math.cos(o*Math.PI/180).toFixed(15).replace(/\.?0+$/,"")},tan:function(o){return"rad"==localStorage.radDeg?Math.tan(o):Math.tan(o*Math.PI/180).toFixed(15).replace(/\.?0+$/,"")},asin:function(o){return"rad"==localStorage.radDeg?Math.asin(o):180*Math.asin(o)/Math.PI},"in":function(o){return Math.log(o)},acos:function(o){return"rad"==localStorage.radDeg?Math.acos(o):180*Math.acos(o)/Math.PI},atan:function(o){return"rad"==localStorage.radDeg?Math.atan(o):180*Math.atan(o)/Math.PI},percentage:function(){return""==calculator.op?(calculator.first=String(.01*calculator.first),calculator.clear=!0,calculator.first):(calculator.second=String(.01*calculator.first*calculator.second),calculator.clear=!0,calculator.second)}},math:function(o,t,e){var r=calculator.mathFunctions[o](t,e);return 0!=r?calculator.screen.set(r):void calculator.screen.get()},event:{addDecimal:function(){1==calculator.clear&&calculator.screen.clear(),-1==calculator.screen.get().indexOf(".")&&(""==calculator.op?(calculator.first=calculator.first+".",calculator.screen.set(calculator.first)):(("."==calculator.second||""==calculator.second)&&(calculator.second="0."),calculator.second=calculator.second+".",calculator.screen.set(calculator.second)))},posNeg:function(){""==calculator.op&&(calculator.first=0==calculator.first.length?"-0":-1==calculator.first.indexOf("-")?"-"+calculator.first:calculator.first.replace(/-/g,""),calculator.screen.set(calculator.first)),""!=calculator.op&&(calculator.second=0==calculator.second.length?"-0":-1==calculator.second.indexOf("-")?"-"+calculator.second:calculator.second.replace(/-/g,""),calculator.screen.set(calculator.second))}},m:{recall:function(){return 0!=parseFloat(localStorage.m)&&(""==calculator.op?(calculator.first=localStorage.m,calculator.screen.set(calculator.first)):(calculator.second=localStorage.m,calculator.screen.set(calculator.second))),!1},clear:function(){return localStorage.m=0,!1},minus:function(){return localStorage.m=parseFloat(localStorage.m)-parseFloat(calculator.screen.get()),!1},plus:function(){return localStorage.m=parseFloat(localStorage.m)+parseFloat(calculator.screen.get()),!1}},parse:{commas:function(o){var t=o.toString().split(".");return t[0]=t[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),t.join(".")}},animate:{op:function(){$(".opp").css({"-webkit-transform":"scale(1)"}),void 0!=calculator.op&&($("#"+calculator.op).css({"-webkit-transform":"scale(0.90)"}),setTimeout(function(){$("#"+calculator.op).css({"-webkit-transform":"scale(0.95)"})},100))}},clipboard:{copy:function(o){var t=$("<input/>");t.val(o),$("body").append(t),t.select(),document.execCommand("copy"),t.remove()}},paste:function(){var o=$("<input/>");$("body").append(o),o.select(),document.execCommand("paste");var t=parseFloat(o.val());return isNaN(parseFloat(t))||"0"==String(t)?(calculator.screen.selector.text("ERROR"),calculator.screen.clear()):(calculator.screen.set(t),""==calculator.op?calculator.first=t:calculator.second=t),o.remove(),t},rad:function(){return $("#rad-deg").text("rad"),"rad"},deg:function(){return $("#rad-deg").text("deg"),"deg"}};$(document).ready(function(){calculator.ini({selector:$("#input"),max:15})});
