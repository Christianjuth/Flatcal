function injectCSS(o){$(".button").unbind("mouseover").unbind("mouseout"),calculatorTheme=o,theme.inject.color("#margins",o.body.color,"#fff"),theme.inject.color("#input-container",o.input.color,"#eee"),theme.inject.borderColor("#input-container",o.input.borderColor,o.body.color),theme.inject.textColor("#input-container",o.input.textColor,"#000"),theme.inject.font("#input-container",o.input.font,"arial"),theme.inject.color(".button",o.button.color,"#eee"),theme.inject.hoverColor(".button",o.button.hoverColor,o.button.color),theme.inject.outlineColor(".button",o.button.borderColor,o.body.color),theme.inject.textColor(".button",o.button.textColor,"#000"),theme.inject.font(".button",o.button.font,"arial"),theme.inject.borderWidth(".button",o.button.borderWidth,1),theme.inject.color(".number",o.button.numbers.color),theme.inject.hoverColor(".number",o.button.numbers.hoverColor),theme.inject.textColor(".number",o.button.numbers.textColor),""!=o.button.point.color&&theme.inject.color("#point",o.button.point.color,"#eee"),""!=o.button.point.hoverColor&&$("#point").unbind("mouseover").mouseover(function(){$(this).css({"background-color":o.button.point.hoverColor})}),""!=o.button.point.textColor&&$("#point").css({color:o.button.point.textColor}),""!=o.button.ce.color&&($("#ce").css({"background-color":o.button.ce.color}),$("#ce").unbind("mouseout").mouseout(function(){$(this).css({"background-color":o.button.ce.color})})),""!=o.button.ce.hoverColor&&$("#ce").unbind("mouseover").mouseover(function(){$(this).css({"background-color":o.button.ce.hoverColor})}),""!=o.button.ce.textColor&&$("#ce").css({color:o.button.ce.textColor}),""!=o.button.positiveNegative.color&&($("#positive-negative").css({"background-color":o.button.positiveNegative.color}),$("#positive-negative").mouseout(function(){$(this).css({"background-color":o.button.positiveNegative.color})})),""!=o.button.positiveNegative.hoverColor&&$("#positive-negative").mouseover(function(){$(this).css({"background-color":o.button.positiveNegative.hoverColor})}),""!=o.button.positiveNegative.textColor&&$("#positive-negative").css({color:o.button.positiveNegative.textColor}),""!=o.button.operators.color&&($("#plus, #subtract, #divide, #multiply").css({"background-color":o.button.operators.color}),$("#plus, #subtract, #divide, #multiply").unbind("mouseout"),$(".opp").mouseout(function(){var t=$(this).attr("id");("plus"==t||"subtract"==t||"divide"==t||"multiply"==t)&&$(this).not("#mod").css({"background-color":o.button.operators.color})})),""!=o.button.operators.hoverColor&&($("#plus, #subtract, #divide, #multiply").unbind("mouseover"),$(".opp").mouseover(function(){var t=$(this).attr("id");("plus"==t||"subtract"==t||"divide"==t||"multiply"==t)&&$(this).css({"background-color":o.button.operators.hoverColor})})),""!=o.button.operators.textColor&&$("#plus, #subtract, #divide, #multiply").css({color:o.button.operators.textColor}),""!=o.button.equal.color&&($("#equal").css({"background-color":o.button.equal.color}),$("#equal").unbind("mouseout").mouseout(function(){$(this).css({"background-color":o.button.equal.color})})),""!=o.button.equal.hoverColor&&$("#equal").unbind("mouseover").mouseover(function(){$(this).css({"background-color":o.button.equal.hoverColor})}),""!=o.button.equal.textColor&&$("#equal").css({color:o.button.equal.textColor})}function ajaxGetFile(o,t){var e=!1;return $.ajax({url:o,async:!1,dataType:t,tryCount:0,retryLimit:15,success:function(o){e=o},error:function(){location.reload()}}),e}var theme={ini:function(){},load:function(o){"string"==typeof o&&(o=this.get(o)),this.validate(o)&&injectCSS(o)},set:function(o){"string"==typeof o&&(o=this.get(o)),this.validate(o)&&(theme.update(o),injectCSS(o))},get:function(o){var t=null;if(void 0==o)for(t=new Array,data=ajaxGetFile("../resources/themes/themes-list.json","json"),i=0;i<data.length;i++)t.push(data[i].name.toLowerCase());else t=new Array,data=ajaxGetFile("../resources/themes/"+o+".json","json"),t=data;return t},getCurrent:function(){return"custom"!=localStorage.theme?localStorage.theme:$.parseJSON(localStorage.customTheme).manifest.name},save:function(o){"object"!=typeof o&&(o=JSON.parse(o)),void 0==o.manifest&&(o.manifest={}),o.manifest.version=1.1;var t=new Blob([JSON.stringify(o)],{type:"text/plain;charset=utf-8;"});void 0!=o.manifest.name&&void 0!=o.manifest.name?saveAs(t,o.manifest.name+".json"):saveAs(t,"my-theme.json")},update:function(o){localStorage.theme="custom",localStorage.customTheme=JSON.stringify(o),customCalculatorTheme=jQuery.parseJSON(localStorage.customTheme)},sort:{foward:function(o,t){return o.name.toLocaleLowerCase()<t.name.toLocaleLowerCase()?!1:o.name.toLocaleLowerCase()>t.name.toLocaleLowerCase()?!0:!1},reverse:function(o,t){return o.name.toLocaleLowerCase()<t.name.toLocaleLowerCase()?!0:o.name.toLocaleLowerCase()>t.name.toLocaleLowerCase()?!1:void 0}},validate:function(o){var t=!0,e={presence:!0,format:{pattern:/^#([0-9a-f]{3}|[0-9a-f]{6})$/i}},n={format:{pattern:/^(#[0-9a-f]{3}|#[0-9a-f]{6}|\s*$)$/i}};t=t&&void 0==validate(o.manifest,{version:{numericality:{lessThanOrEqualTo:1.1}}}),t=t&&void 0==validate(o.body,{color:e}),t=t&&void 0==validate(o.input,{color:e,borderColor:e,textColor:e}),o.button.borderWidth=void 0==o.button.borderWidth||""==o.button.borderWidth&&0!=o.button.borderWidth?1:parseInt("0"+o.button.borderWidth),o.button.borderRadius=parseInt("0"+o.button.borderRadius),t=t&&void 0==validate(o.button,{color:e,hoverColor:e,borderColor:n,borderRadius:{presence:!0,numericality:{greaterThanOrEqualTo:0,lessThanOrEqualTo:25}},borderWidth:{numericality:{greaterThanOrEqualTo:0,lessThanOrEqualTo:5}},textColor:e});var u=["numbers","point","ce","positiveNegative","operators","equal"];for(i=0;i<u.length;i++)o.button[u[i]].color,t=t&&void 0==validate(o.button[u[i]],{color:n,borderColor:n,textColor:n});return t},inject:{color:function(o,t,e){void 0!=t&&""!=t?($(o).css({"background-color":t}),$(o).unbind("mouseout"),$(o).mouseout(function(){$(this).css({"background-color":t})})):void 0!=e&&""!=e&&($(o).css({"background-color":e}),$(o).unbind("mouseout"),$(o).mouseout(function(){$(this).css({"background-color":e})}))},hoverColor:function(o,t,e){void 0!=t&&""!=t?$(o).mouseover(function(){$(this).css({"background-color":t})}):void 0!=e&&""!=e&&$(o).mouseover(function(){$(this).css({"background-color":e})})},textColor:function(o,t,e){void 0!=t&&""!=t?$(o).css({color:t}):void 0!=e&&""!=e&&$(o).css({color:e})},font:function(o,t,e){$(o).css(void 0!=t&&""!=t?{"font-family":t}:{"font-family":e})},borderColor:function(o,t,e){$(o).css(void 0!=t&&""!=t?{"border-color":t}:{"border-color":e})},outlineColor:function(o,t,e){$(o).css(void 0!=t&&""!=t?{"outline-color":t}:{"outline-color":e})},borderWidth:function(o,t,e){$(o).css(void 0!=t?{"outline-offset":-1*(parseInt(t)-1),"outline-width":t}:{"outline-offset":-1*(parseInt(e)-1),"outline-width":e})}}};$(document).on("click",".button",function(o){var t=$(this),e=t.offset(),r=o.pageX-e.left,n=o.pageY-e.top,i=t.width(),u=t.find(".ripple");u.addClass("notransition"),u.css({top:n,left:r}),u[0].offsetHeight,u.removeClass("notransition"),t.addClass("hovered"),u.css({width:2*i,height:2*i,"margin-left":-i,"margin-top":-i}),setTimeout(function(){u.addClass("notransition"),u.attr("style",""),u[0].offsetHeight,t.removeClass("hovered"),u.removeClass("notransition")},300)});var calculatorTheme="";$(document).ready(function(){$(".button").each(function(){var o=$(this);o.append("<div class='ripple'></div>")})});
