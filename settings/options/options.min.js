function tenClick(){return 10==numClick?(numClick=1,!0):(numClick+=1,2==numClick&&setTimeout(function(){1!=numClick&&(numClick=1)},2e3),!1)}function readFile(o){var t=o.target.files,e=t[0],r=new FileReader;r.onload=function(){theme.validate($.parseJSON(this.result))?theme.update($.parseJSON(this.result)):Alert("Error!","invalid theme")},r.readAsText(e)}function customTheme(o){"custom"==$("#theme-selctor").val()?$("#custom-themes").fadeIn():1==o?$("#custom-themes").fadeOut():$("#custom-themes").hide()}function changelogLine(o){var t=new Date(o.date.replace(/-/,"/")),e=["January","February","March","April","May","June","July","August","September","October","November","December"],r=e[t.getMonth()],n=t.getUTCDate(),u=t.getFullYear();$("<tr><td><a href='"+o.link+"'>"+o.version+"</a></td><td>"+o.description+"</td><td>"+r+"-"+n+"-"+u+"</td></tr>").appendTo("table")}function capitalize(o){for(var t=o.split(" "),e=0;e<t.length;e++){var r=t[e].charAt(0).toUpperCase();t[e]=r+t[e].substr(1)}return t.join(" ")}function dialogue(o,t,e){$("<div />").qtip({content:{text:o,title:t},position:{my:"center",at:"center",target:$(window)},show:{ready:!0,modal:{on:!0,blur:!1}},hide:{effect:e},style:{type:"dialogue",classes:"qtip-bootstrap"},events:{render:function(o,t){$("button",t.elements.content).click(function(o){t.hide(o)})},hide:function(o,t){t.destroy()}}})}localStorage.tutorial=!0,$(document).ready(function(){progressJs().start(),$("#theme-selctor").chosen({disable_search_threshold:10}),$.getJSON(chrome.extension.getURL("resources/themes/themes-list.json"),function(o){for(o.sort(theme.sort.reverse),i=0;i<o.length;i++){var t=capitalize(o[i].name).replace(/-/," "),e=o[i].name.toLocaleLowerCase();$('<option class="theme-selctor-option" value="'+e+'">'+t+"&#174;</option>").prependTo("#theme-selctor")}option.defineSelect("#theme-selctor","theme",!0,function(){customTheme("custom"==localStorage.theme?!0:!1)}),progressJs().end()}),option.defineCheck("#scientific","scientific",!0),option.defineCheck("#dissable-notify-delay","noNotifyDelay",!0),option.defineCheck("#only-important-notify","limitNotifications",!0),option.defineCheck("#screen-only","screenOnly",!0,function(){option.dissableCheck("#scientific")},function(){option.enableCheck("#scientific")}),document.getElementById("theme-file-upload").addEventListener("change",readFile,!1),$("#save-current-theme").click(function(){theme.save(jQuery.parseJSON(localStorage.customTheme))}),option.defineCheck("#dissable-analytics","dev",!0),$("#reset-localStorage").find("a").click(function(){storage.resetAll()}),$("h1").click(function(){1==tenClick()&&("true"!=localStorage.dev&&analyticsEvent("dev-center","clicked"),$(".lightbox").unbind(),$(".lightbox, .popup").show(),myLibrary(".popup").center(),setTimeout(function(){$(".lightbox").click(function(){$(".lightbox, .popup").hide()})},300))}),1!=clientInformation.onLine?$("#changelog").hide():$.getJSON("https://raw.githubusercontent.com/Christianjuth/calculator-browser-extension/JSON/changelog.json",function(o){for(i=0;i<Math.min(o.length,3);i++)line=o[i],changelogLine(0==i?line:line)})});var numClick=1;option={defineCheck:function(o,t,e,r,n){void 0==r&&(r=function(){}),void 0==n&&(n=function(){}),o=$(o),"true"==localStorage[t]?(o.find("input").prop("checked",!0),r()):(o.find("input").prop("checked",!1),n()),o.iCheck({checkboxClass:"icheckbox_square-grey checkbox",increaseArea:"20%"}).on("ifToggled",function(){0!=o.find("input").prop("checked")?(localStorage[t]="true",r()):(localStorage[t]="false",n())}),1==e&&this.watch(t,500,function(e){e.defineCheck(o,t,!1,r,n)})},dissableCheck:function(o){o=$(o),$(o).fadeTo(100,.4,function(){$(o).children(".checkbox").iCheck("disable")})},enableCheck:function(o){o=$(o),$(o).fadeTo(100,1,function(){$(o).children(".checkbox").iCheck("enable")})},defineSelect:function(o,t,e,r){o=$(o),o.val(localStorage[t]),o.chosen({disable_search_threshold:10}),o.trigger("chosen:updated"),r(),o.change(function(){localStorage[t]=o.val(),r()}),1==e&&this.watch(t,1e3,function(e){e.defineSelect(o,t,!1,r)}),o.trigger("chosen:updated")},watch:function(o,t,e){var r=localStorage[o];setTimeout(function(o,t,e,r,n){localStorage[o]!=r&&e(n),n.watch(o,t,e)},t,o,t,e,r,this)}},window.Alert=function(o,t,e){var r=$("<p />",{text:t}),n=$("<button />",{text:"Ok","class":"full"});dialogue(r.add(n),o,e)};
